<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Find a matrix position inside a larger matrix — fpos • kit</title><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Find a matrix position inside a larger matrix — fpos"><meta name="description" content="The function fpos returns the locations (row and column index) where a small matrix may be found in a larger matrix. The function also works with vectors."><meta property="og:description" content="The function fpos returns the locations (row and column index) where a small matrix may be found in a larger matrix. The function also works with vectors."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">kit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.21</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Documentation</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fastverse/kit" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Find a matrix position inside a larger matrix</h1>

      <div class="d-none name"><code>fpos.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function <code>fpos</code> returns the locations (row and column index) where a small matrix may be found in a larger matrix. The function also works with vectors.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fpos</span><span class="op">(</span><span class="va">needle</span>, <span class="va">haystack</span>, all<span class="op">=</span><span class="cn">TRUE</span>, overlap<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-needle">needle<a class="anchor" aria-label="anchor" href="#arg-needle"></a></dt>
<dd><p>A matrix or vector to search for in the larger matrix or vector <code>haystack</code>. Note that the <code>needle</code> dimensions (row and column size) must be smaller than the <code>haystack</code> dimensions.</p></dd>

  <dt id="arg-haystack">haystack<a class="anchor" aria-label="anchor" href="#arg-haystack"></a></dt>
<dd><p>A matrix or vector to look into.</p></dd>

  <dt id="arg-all">all<a class="anchor" aria-label="anchor" href="#arg-all"></a></dt>
<dd><p>A logical value to indicate whether to return all occurrences (<code>TRUE</code>) or only the first one (<code>FALSE</code>). Default value is <code>TRUE</code>.</p></dd>

  <dt id="arg-overlap">overlap<a class="anchor" aria-label="anchor" href="#arg-overlap"></a></dt>
<dd><p>A logical value to indicate whether to allow the small matrix occurrences to overlap or not. Default value is <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A two columns matrix that contains the position or index where the small matrix (needle) can be found in the larger matrix. The first column refers to rows and the second to columns. In case both the needle and haystack are vectors, a vector is returned.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Morgan Jacob</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1: find a matrix inside a larger one</span></span></span>
<span class="r-in"><span><span class="va">big_matrix</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">small_matrix</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">15</span>, <span class="fl">24</span>, <span class="fl">25</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">fpos</span><span class="op">(</span><span class="va">small_matrix</span>, <span class="va">big_matrix</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    4    2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: find a vector inside a larger one</span></span></span>
<span class="r-in"><span><span class="fu">fpos</span><span class="op">(</span><span class="fl">14</span><span class="op">:</span><span class="fl">15</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 14</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3:</span></span></span>
<span class="r-in"><span><span class="va">big_matrix</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">10</span>, ncol <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">small_matrix</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return all occurences</span></span></span>
<span class="r-in"><span><span class="fu">fpos</span><span class="op">(</span><span class="va">small_matrix</span>, <span class="va">big_matrix</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    2    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    7    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    2    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    7    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]    2    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,]    7    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7,]    2    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [8,]    7    4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return only the first</span></span></span>
<span class="r-in"><span><span class="fu">fpos</span><span class="op">(</span><span class="va">small_matrix</span>, <span class="va">big_matrix</span>, all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    2    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># return non overlapping occurences</span></span></span>
<span class="r-in"><span><span class="fu">fpos</span><span class="op">(</span><span class="va">small_matrix</span>, <span class="va">big_matrix</span>, overlap <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    2    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    7    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    2    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    7    3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Benchmarks</span></span></span>
<span class="r-in"><span><span class="co"># ----------</span></span></span>
<span class="r-in"><span><span class="co"># x = matrix(1:5, nrow=1e4, ncol=5e3) # 191Mb</span></span></span>
<span class="r-in"><span><span class="co"># microbenchmark::microbenchmark(</span></span></span>
<span class="r-in"><span><span class="co">#  fpos=kit::fpos(1L, x),</span></span></span>
<span class="r-in"><span><span class="co">#  which=which(x==1L, arr.ind=TRUE),</span></span></span>
<span class="r-in"><span><span class="co">#  times=10L</span></span></span>
<span class="r-in"><span><span class="co"># )</span></span></span>
<span class="r-in"><span><span class="co"># Unit: milliseconds</span></span></span>
<span class="r-in"><span><span class="co">#  expr  min  lq  mean median   uq  max neval</span></span></span>
<span class="r-in"><span><span class="co"># fpos   202  206  220    221  231  241    10</span></span></span>
<span class="r-in"><span><span class="co"># which  612  637  667    653  705  724    10</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Morgan Jacob.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

